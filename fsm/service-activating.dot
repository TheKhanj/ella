digraph service_states {
	label="Service Activating Finite State Machine";
	rankdir=LR;
	fontname="Ubuntu";
	style=solid;
	graph [pad="0.5"];
	node [shape=circle, style=filled, fillcolor=lightblue, fontname="Ubuntu"];

	// States
	inactive               [label="inactive", fillcolor="lightgray"];
	active                 [label="active", fillcolor="lightgreen"];
	failed                 [label="failed", fillcolor="lightcoral"];

	subgraph cluster_activating {
		label="Activating";
		style=dashed;
		fontsize=20;

		activating_pre_start   [label="activating_pre_start"];
		activating_start       [label="activating_start"];
		activating_post_start  [label="activating_post_start"];
	}

	// Transitions
	failed                -> activating_pre_start  [label="restart/auto-restart"];
	inactive              -> activating_pre_start  [label="start"];
	activating_pre_start  -> activating_start      [label="ExecPreStart (ok)"];
	activating_pre_start  -> failed                [label="ExecPreStart (fail)"];
	activating_start      -> activating_post_start [label="ExecStart (ok)"];
	activating_start      -> failed                [label="ExecStart (fail/timeout)"];
	activating_post_start -> active                [label="ExecPostStart (ok)"];
	activating_post_start -> failed                [label="ExecPostStart (fail)"];
}
