digraph systemd_states {
	rankdir=LR;
	node [shape=circle, style=filled, fillcolor=lightblue];

	// States
	inactive     [label="inactive", fillcolor="lightgray"];
	active       [label="active", fillcolor="lightgreen"];
	failed       [label="failed", fillcolor="lightcoral"];
	activating   [label="activating"];
	deactivating [label="deactivating"];
	reloading    [label="reloading"];

	// Start transition
	inactive     -> activating   [label="start"];
	failed       -> activating   [label="restart/auto-restart"];
	activating   -> active       [label="start done"];

	// Watchdog
	active       -> failed       [label="fail (watchdog)"];

	// Stop transition
	active       -> deactivating [label="stop"];
	deactivating -> failed       [label="fail"];
	deactivating -> inactive     [label="stop done"];
	activating   -> failed       [label="fail"];

	// Reload transition
	active       -> reloading    [label="reload"];
	reloading    -> active       [label="reload done"];
}
